<ng-template #rt let-r="result" let-t="term">
    {{ r.nome}}
</ng-template>

<div class="col-12" style="padding: 15px;margin: 0px">
    <app-page-header [pheading]="' Titulos'" [picon]="'fa-money'" [heading]="'Titulos a Receber'" [icon]="'fa-th-list'">
    </app-page-header>

    <div class="card div-geral-page">

        <ngx-spinner class="spinner-full" name="fullSpinner" [fullScreen]="false" bdColor="rgba(51,51,51,0.8)"
            size="medium" color="#fff" type="ball-spin-clockwise">
            <p style="font-size: 20px; color: white">Comunicando com o Servidor, Aguarde...</p>
        </ngx-spinner>

        <div *ngIf="statusForm === 1 || statusForm === 2" class="margin-padding-0">

            <div class="card bg-light mb-3">
                <div class="card-body card-buttons">
                    <div class="row">
                        <div class="col-lg-3 col-6 div-mobile-buttons d-grid">
                            <button class="btn btn-block butao-acao"
                                [ngClass]="statusForm === 2 ? 'btn-warning':'btn-primary'" (click)="onCadastra()">
                                <span class="fa fa-save span-bt-icon"></span><span class="span-bt-text">{{statusForm ===
                                    2 ? 'Alterar' : 'Salvar'}}</span>
                            </button>
                        </div>
                        <div class="col-lg-2 col-6 div-mobile-buttons d-grid">
                            <button type="button" class="btn btn-outline-dark butao-acao" (click)="onLimpa()">
                                <span class="fa fa-eraser span-bt-icon"></span><span class="span-bt-text">Limpar</span>
                            </button>
                        </div>
                        <div class="col-lg-1 col-4 div-mobile-buttons d-grid">
                            <button type="button" class="btn btn-block btn-info butao-acao" (click)="onLeftArray()">
                                <span class="fa fa-arrow-circle-left span-bt-icon"></span>
                            </button>
                        </div>
                        <div class="col-lg-1 col-4 div-mobile-buttons d-grid">
                            <button type="button" class="btn btn-block btn-info butao-acao" (click)="onRightArray()">
                                <span class="fa fa-arrow-circle-right span-bt-icon"></span>
                            </button>
                        </div>
                        <div class="col-lg-1 col-4 div-mobile-buttons d-grid">
                            <button type="button" class="btn btn-block btn-info butao-acao" (click)="onTable()">
                                <span class="fa fa-table span-bt-icon"></span>
                            </button>
                        </div>
                        <div class="col-lg-2 col-6 div-mobile-buttons d-grid" [ngbTooltip]="tooltipBtnDeletar()">
                            <button type="button" class="btn btn-block btn-danger butao-acao" (click)="onDeleta()"
                                [disabled]="!isValidDelete()">
                                <span class="fa fa-trash span-bt-icon"></span><span class="span-bt-text">Deletar</span>
                            </button>
                        </div>
                        <div class="col-lg-2 col-6 div-mobile-buttons d-grid">
                            <button type="button" class="btn btn-block btn-success butao-acao" (click)="onPesquisa()">
                                <span class="fa fa-search span-bt-icon"></span><span
                                    class="span-bt-text">Pesquisar</span>
                            </button>
                        </div>
                    </div>

                </div>
            </div>

            <div class="card bg-light mb-3">
                <div class="card-body padding-5">
                    <form [formGroup]="tituloForm" (ngSubmit)="onCadastra()">

                        <div ngbAccordion>
                            <div ngbAccordionItem [collapsed]="true">
                                <h2 ngbAccordionHeader>
                                    <button ngbAccordionButton>CAMPOS DE PESQUISA ADICIONAIS</button>
                                </h2>
              
                                <div ngbAccordionCollapse>
                                    <div ngbAccordionBody>
                                        <ng-template >

                                            <div class="row">
        
                                                <div class="col-6 padding-5">
                                                    <div class="form-group">
                                                        <label for="idInputDtaEmissaoInicial">Data Emissão Inicial</label>
                                                        <input type="date" class="form-control" id="idInputDtaEmissaoInicial"
                                                            name="nmInputDtaEmissaoInicial"
                                                            ngbTooltip="Busca de pela data de emissão, data inicial"
                                                            [(ngModel)]="tituloReceberPesquisaDTO.dtaEmissaoInicial"
                                                            [ngModelOptions]="{ standalone: true }">
                                                    </div>
                                                </div>
        
                                                <div class="col-6 padding-5">
                                                    <div class="form-group">
                                                        <label for="idInputDtaEmissaoFinal">Data Emissão Final</label>
                                                        <input type="date" class="form-control" id="idInputDtaEmissaoFinal"
                                                            name="nmInputDtaEmissaoFinal"
                                                            ngbTooltip="Busca de pela data de emissão, data final"
                                                            [(ngModel)]="tituloReceberPesquisaDTO.dtaEmissaoFinal"
                                                            [ngModelOptions]="{ standalone: true }">
                                                    </div>
                                                </div>
        
                                                <div class="col-6 padding-5">
                                                    <div class="form-group">
                                                        <label for="idInputDtaVencimentoInicial">Data Vencimento Inicial</label>
                                                        <input type="date" class="form-control" id="idInputDtaVencimentoInicial"
                                                            name="nmInputDtaVencimentoInicial"
                                                            ngbTooltip="Busca de pela data de vencimento, data inicial"
                                                            [(ngModel)]="tituloReceberPesquisaDTO.dtaVencimentoInicial"
                                                            [ngModelOptions]="{ standalone: true }">
                                                    </div>
                                                </div>
        
                                                <div class="col-6 padding-5">
                                                    <div class="form-group">
                                                        <label for="idInputDtaVencimentoFinal">Data Vencimento Final</label>
                                                        <input type="date" class="form-control" id="idInputDtaVencimentoFinal"
                                                            name="nmInputDtaVencimentoFinal"
                                                            ngbTooltip="Busca de pela data de vencimento, data final"
                                                            [(ngModel)]="tituloReceberPesquisaDTO.dtaVencimentoFinal"
                                                            [ngModelOptions]="{ standalone: true }">
                                                    </div>
                                                </div>
        
                                                <div class="col-6 padding-5">
                                                    <div class="form-group">
                                                        <label for="idInputDtaLiquidacaoInicial">Data Liquidação Inicial</label>
                                                        <input type="date" class="form-control" id="idInputDtaLiquidacaoInicial"
                                                            name="nmInputDtaLiquidacaoInicial"
                                                            ngbTooltip="Busca de pela data de liquidação, data inicial"
                                                            [(ngModel)]="tituloReceberPesquisaDTO.dtaLiquidacaoInicial"
                                                            [ngModelOptions]="{ standalone: true }">
                                                    </div>
                                                </div>
        
                                                <div class="col-6 padding-5">
                                                    <div class="form-group">
                                                        <label for="idInputDtaLiquidacaoFinal">Data Liquidação Final</label>
                                                        <input type="date" class="form-control" id="idInputDtaLiquidacaoFinal"
                                                            name="nmInputDtaLiquidacaoFinal"
                                                            ngbTooltip="Busca de pela data de liquidação, data final"
                                                            [(ngModel)]="tituloReceberPesquisaDTO.dtaLiquidacaoFinal"
                                                            [ngModelOptions]="{ standalone: true }">
                                                    </div>
                                                </div>
        
                                                <div class="col-6 padding-5">
                                                    <div class="form-group">
                                                        <label for="idInputPreVenda">Id da pré-venda</label>
                                                        <input type="number" class="form-control" id="idInputPreVenda"
                                                            name="nmInputPreVenda" ngbTooltip="Busca id da pré-venda"
                                                            [(ngModel)]="tituloReceberPesquisaDTO.prevendaId"
                                                            [ngModelOptions]="{ standalone: true }">
                                                    </div>
                                                </div>
        
                                            </div>
        
                                        </ng-template>
                                      
                                    </div>
                                </div>
                            </div>
                        </div>


        

                        <div class="row">

                            <div class="col-sm-2 col-6 padding-5">
                                <div class="form-group">
                                    <label for="idTitulo">Id</label>
                                    <input type="number" class="form-control" (keydown.enter)="onPesquisa()"
                                        id="idTitulo" formControlName="id">
                                </div>
                            </div>

                            <div class="col-sm-2 col-6 padding-5">
                                <div class="form-group">
                                    <label for="idNumTitulo">Num Titulo</label>
                                    <input type="text" class="form-control" id="idNumTitulo"
                                        formControlName="numTitulo">
                                </div>
                            </div>

                            <div class="col-sm-2 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idNumTituloCNAB">Nosso Número</label>
                                    <input type="text" class="form-control" id="idNumTituloCNAB"
                                        formControlName="numTituloCNAB">
                                </div>
                            </div>

                            <div class="col-sm-3 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idTituloTipoDTO">Tipo</label>

                                    <select class="form-control"
                                        [ngClass]="{'is-invalid': submitted && f.tituloTipoDTO.errors}"
                                        [compareWith]="compareTituloTipo" id="idTituloTipoDTO"
                                        formControlName="tituloTipoDTO">
                                        <option [ngValue]="null">SELECIONE</option>
                                        <option *ngFor="let tt of tituloTipos" [ngValue]="tt">{{tt.nome}}
                                        </option>
                                    </select>
                                    <div *ngIf="submitted && f.tituloTipoDTO.errors" class="invalid-feedback">
                                        <div *ngIf="f.tituloTipoDTO.errors['required']">Selecione tipo de titulo
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-sm-3 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idTituloStatus">Status</label>

                                    <select class="form-control"
                                        [ngClass]="{'is-invalid': submitted && f.indStatus.errors}"
                                        [compareWith]="compareTituloStatus" id="idTituloStatus"
                                        formControlName="indStatus">
                                        <option [ngValue]="null">SELECIONE</option>
                                        <option *ngFor="let fts of tituloStatus" [ngValue]="fts.sigla">{{fts.nome}}
                                        </option>
                                    </select>
                                    <div *ngIf="submitted && f.indStatus.errors" class="invalid-feedback">
                                        <div *ngIf="f.indStatus.errors['required']">Selecione o status do titulo
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <hr *ngIf="isVinculoPreVenda()">
                        <div class="row" *ngIf="isVinculoPreVenda()">
                            <div class="col-12 padding-5">
                                <div class="form-group">
                                    <label for="id" >Atenção Titulo Vinculado a Pré Venda, excluindo o pedido este titulo é
                                        automaticamente deletado</label><br>
                                    <label for="id" >Id</label>
                                    <span class="form-control span-disable">{{tituloReceberDTO.vendaDTO_id}}</span>
                                </div>
                            </div>
                        </div>

                        <hr>

                        <div class="row">

                            <div class="col-sm-3 col-12 padding-5">
                                <div class="form-group">
                                    <label for="inputDtaEmissao">Data/hr Inclusão</label>
                                    <span class="form-control span-disable" name="nameDtaInclusao"
                                        id="idDtaInclusao">{{tituloReceberDTO.dtaInclusao | amDateFormat:'DD/MM/YYYY
                                        HH:mm:ss'}}</span>
                                </div>
                            </div>

                            <div class="col-sm-2 col-12 padding-5">
                                <div class="form-group">
                                    <label for="inputDtaEmissao">Usuário Inclusão</label>
                                    <span class="form-control span-disable" name="nameUserInclusao"
                                        id="idUserInclusao">{{tituloReceberDTO.usuarioInclusao}}</span>
                                </div>
                            </div>

                            <div class="col-sm-3 col-12 padding-5">
                                <div class="form-group">
                                    <label for="inputDtaEmissao">Data/hr Ult Alteração</label>
                                    <span class="form-control span-disable" name="nameDtaInclusao"
                                        id="idDtaInclusao">{{tituloReceberDTO.dtaUltAlteracao | amDateFormat:'DD/MM/YYYY
                                        HH:mm:ss'}}</span>
                                </div>
                            </div>

                            <div class="col-sm-2 col-12 padding-5">
                                <div class="form-group">
                                    <label for="inputDtaEmissao">Usuário Ult Alteração</label>
                                    <span class="form-control span-disable" name="nameUserInclusao"
                                        id="idUserInclusao">{{tituloReceberDTO.usuarioUltAlteracao}}</span>
                                </div>
                            </div>

                            <div class="col-sm-2 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idUserBaixa">Usuário Baixa</label>
                                    <span class="form-control span-disable" name="nmUserBaixa"
                                        id="idUserBaixa">{{tituloReceberDTO.usuarioBaixa}}</span>
                                </div>
                            </div>
                        </div>

                        <hr>

                        <div class="row">

                            <div class="col-12" *ngIf="flgPesquisandoCliente === 1">
                                <span class="fa fa-refresh fa-spin fa-fw span-pesq"></span><span
                                    class="span-pesq">Buscando
                                    dados do cliente, aguarde...</span>
                            </div>

                            <div class="col-sm-2 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idInputCodCli">Cod Cliente</label>
                                    <div class="input-group" ngbTooltip="Digite o Codigo do Cliente">
                                        <input type="number" class="form-control" id="idInputCodCli"
                                            formControlName="clienteId" (keydown.Tab)="findClienteById()"
                                            (keydown.enter)="findClienteById()">
                                        <div class="input-group-append">
                                            <button class="btn btn-secondary" (click)="findClienteById()"
                                                type="button"><i class="fa fa-search"></i></button>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-sm-10 col-12 padding-5">
                                <div class="form-group">
                                    <label for="typeaheadCliente">Nome Cliente</label>
                                    <input id="typeaheadCliente" type="text" class="form-control"
                                        [class.is-invalid]="searchFailedCliente" formControlName="clienteDTO"
                                        [ngClass]="{'is-invalid': submitted && f.clienteDTO.errors}"
                                        [ngbTypeahead]="searchCliente" (selectItem)="typeaHeadSelectCliente($event)"
                                        [inputFormatter]="formatterCliente" [resultTemplate]="rt"
                                        [placement]="'top-left'" placeholder="Busca Nome do Cliente">
                                    <span class="col-sm-2 col-form-label" *ngIf="searchingCliente">procurando...</span>
                                    <span class="col-sm-12 col-form-label" *ngIf="searchFailedCliente">Não
                                        foi
                                        encontrado nada</span>
                                    <div *ngIf="submitted && f.clienteDTO.errors" class="invalid-feedback">
                                        <div *ngIf="f.clienteDTO.errors['required']">Selecione o Cliente para o Titulo
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </div>

                        <hr>

                        <div class="row">

                            <div class="col-12 padding-5">
                                <div class="form-group">
                                    <label for="idSelectEmissor">Emissor</label>
                                    <select class="form-control" [compareWith]="compareEmissor"
                                        formControlName="clienteEmissorDTO" id="idSelectEmissor">
                                        <option [ngValue]="null">SELECIONE</option>
                                        <option *ngFor="let emi of getEmissoresCliente()" [ngValue]="emi">{{emi.nome}}
                                        </option>
                                    </select>
                                </div>
                            </div>


                            <!--
                        <div class="col-12" *ngIf="flgPesquisandoEmissor === 1">
                            <span class="fa fa-refresh fa-spin fa-fw span-pesq"></span><span class="span-pesq">Buscando
                                dados do emissor, aguarde...</span>
                        </div>

                        <div class="col-sm-2 col-12 padding-5">
                            <div class="form-group">
                                <label for="idInputCodEmissor">Cod Emissor</label>
                                <div class="input-group" ngbTooltip="Digite o Codigo do Emissor">
                                    <input type="number" class="form-control" id="idInputCodEmissor"
                                        formControlName="emissorChequeId" (keydown.Tab)="findEmissorById()"
                                        (keydown.enter)="findEmissorById()">
                                    <div class="input-group-append">
                                        <button class="btn btn-secondary" (click)="findEmissorById()" type="button"><i
                                                class="fa fa-search"></i></button>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="col-sm-10 col-12 padding-5">
                            <div class="form-group">
                                <label for="typeaheadEmissor">Nome Emissor</label>
                                <input id="typeaheadEmissor" type="text" class="form-control"
                                    [class.is-invalid]="searchFailedEmissor" formControlName="emissorChequeDTO"
                                    [ngbTypeahead]="searchEmissor" (selectItem)="typeaHeadSelectEmissor($event)"
                                    [inputFormatter]="formatterCliente" [resultTemplate]="rt" [placement]="'top-left'"
                                    placeholder="Busca Nome do Emissor">
                                <span class="col-sm-2 col-form-label" *ngIf="searchingEmissor">procurando...</span>
                                <span class="col-sm-12 col-form-label" *ngIf="searchFailedEmissor">Não foi encontrado nada</span>
                            </div>
                        </div>
                    -->



                        </div>

                        <hr>

                        <div class="row">

                            <div class="col-12 padding-5">
                                <div class="form-group">
                                    <label for="idCMC7">CMC7</label>
                                    <input type="text" class="form-control" id="idCMC7" (keydown.Tab)="infoCMC7($event)"
                                        (keydown.enter)="infoCMC7($event)" formControlName="cmc7">
                                </div>
                            </div>

                            <div class="col-2 padding-5">
                                <div class="form-group">
                                    <label for="idNumCheque">Num Cheque</label>
                                    <input type="number" class="form-control" id="idNumCheque"
                                        formControlName="numCheque">
                                </div>
                            </div>

                            <div class="col-4 padding-5">
                                <div class="form-group">
                                    <label for="idAgCheque">Agência Cheque</label>
                                    <input type="text" class="form-control" id="idAgCheque"
                                        formControlName="agenciaCheque">
                                </div>
                            </div>

                            <div class="col-6 padding-5">
                                <div class="form-group">
                                    <label for="idCtCheque">Conta Cheque</label>
                                    <input type="text" class="form-control" id="idCtCheque"
                                        formControlName="contaCheque">
                                </div>
                            </div>

                        </div>

                        <hr>

                        <div class="row">

                            <div class="col-sm-2 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idCodBanco">Cod Banco</label>
                                    <input type="number" class="form-control" (keydown.Tab)="selectBancoByCod()"
                                        (keydown.enter)="selectBancoByCod()" id="idCodBanco" formControlName="codBanco">
                                </div>
                            </div>

                            <div class="col-sm-6 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idBancoFebrabans">Banco Febraban</label>

                                    <select class="form-control"
                                        [ngClass]="{'is-invalid': submitted && f.bancoFebrabanDTO.errors}"
                                        [compareWith]="compareBancoFebrabans" id="idBancoFebrabans"
                                        (change)="bancoSelecionado()" formControlName="bancoFebrabanDTO">
                                        <option [ngValue]="null">SELECIONE</option>
                                        <option *ngFor="let bf of bancoFebrabans" [ngValue]="bf">{{bf.codBanco}} -
                                            {{bf.desBanco}}
                                        </option>
                                    </select>
                                    <div *ngIf="submitted && f.bancoFebrabanDTO.errors" class="invalid-feedback">
                                        <div *ngIf="f.bancoFebrabanDTO.errors['required']">Selecione o Banco do titulo
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-sm-4 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idTipoBaixa">Tipo de Baixa</label>

                                    <select class="form-control" id="idTipoBaixa" formControlName="indTipoBaixa">
                                        <option [ngValue]="null">SELECIONADO AUTOMATICAMENTE</option>
                                        <option *ngFor="let ttb of tituloTipoBaixas" [ngValue]="ttb.sigla">{{ttb.nome}}
                                        </option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <hr>
                        <div class="row">
                            <div class="col-sm-3 col-6 padding-5">
                                <div class="form-group">
                                    <label for="idVlrOriginal">Valor Original</label>
                                    <input type="number" [ngClass]="{'is-invalid': submitted && f.vlrOriginal.errors}"
                                        class="form-control" id="idVlrOriginal" formControlName="vlrOriginal">
                                    <div *ngIf="submitted && f.vlrOriginal.errors" class="invalid-feedback">
                                        <div *ngIf="f.vlrOriginal.errors['required']">Digite o valor original
                                        </div>
                                        <div *ngIf="f.vlrOriginal.errors['min']">Valor deve ser acima de 0
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-2 col-6 padding-5">
                                <div class="form-group">
                                    <label for="idVlrJuros">Valor Juros</label>
                                    <input type="number" class="form-control"
                                        [ngClass]="{'is-invalid': submitted && f.vlrJuros.errors}" id="idVlrJuros"
                                        formControlName="vlrJuros">

                                    <div *ngIf="submitted && f.vlrJuros.errors" class="invalid-feedback">
                                        <div *ngIf="f.vlrJuros.errors['required']">Digite o valor original
                                        </div>
                                        <div *ngIf="f.vlrJuros.errors['min']">Valor deve ser maior ou igual a 0
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-sm-2 col-6 padding-5">
                                <div class="form-group">
                                    <label for="idVlrMulta">Valor Multa</label>
                                    <input type="number" class="form-control"
                                        [ngClass]="{'is-invalid': submitted && f.vlrMulta.errors}" id="idVlrMulta"
                                        formControlName="vlrMulta">

                                    <div *ngIf="submitted && f.vlrMulta.errors" class="invalid-feedback">
                                        <div *ngIf="f.vlrMulta.errors['required']">Digite o valor original
                                        </div>
                                        <div *ngIf="f.vlrMulta.errors['min']">Valor deve ser maior ou igual a 0
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-sm-2 col-6 padding-5">
                                <div class="form-group">
                                    <label for="idVlrTaxaCobranca">Valor Taxa Cobrança</label>
                                    <input type="number" class="form-control"
                                        [ngClass]="{'is-invalid': submitted && f.vlrTaxaCobranca.errors}"
                                        id="idVlrTaxaCobranca" formControlName="vlrTaxaCobranca">

                                    <div *ngIf="submitted && f.vlrTaxaCobranca.errors" class="invalid-feedback">
                                        <div *ngIf="f.vlrTaxaCobranca.errors['required']">Digite o valor original
                                        </div>
                                        <div *ngIf="f.vlrTaxaCobranca.errors['min']">Valor deve ser maior ou igual a 0
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-sm-3 col-6 padding-5">
                                <div class="form-group">
                                    <label for="idVlrDespesaAcessoria">Valor Despesa Acessoria</label>
                                    <input type="number" class="form-control"
                                        [ngClass]="{'is-invalid': submitted && f.vlrDespesaAcessoria.errors}"
                                        id="idVlrDespesaAcessoria" formControlName="vlrDespesaAcessoria">

                                    <div *ngIf="submitted && f.vlrDespesaAcessoria.errors" class="invalid-feedback">
                                        <div *ngIf="f.vlrDespesaAcessoria.errors['required']">Digite o valor original
                                        </div>
                                        <div *ngIf="f.vlrDespesaAcessoria.errors['min']">Valor deve ser maior ou igual a
                                            0
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <hr>

                        <div class="row">

                            <div class="col-sm-3 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idDtaEmissao">Data Emissão</label>
                                    <input type="date" [ngClass]="{'is-invalid': submitted && f.dtaEmissao.errors}"
                                        class="form-control" id="idDtaEmissao" formControlName="dtaEmissao">
                                    <div *ngIf="submitted && f.dtaEmissao.errors" class="invalid-feedback">
                                        <div *ngIf="f.dtaEmissao.errors['required']">Selecione a data de emissão
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-3 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idDtaVencimento">Data Vencimento</label>
                                    <input type="date" [ngClass]="{'is-invalid': submitted && f.dtaVencimento.errors}"
                                        class="form-control" id="idDtaVencimento" formControlName="dtaVencimento">
                                    <div *ngIf="submitted && f.dtaVencimento.errors" class="invalid-feedback">
                                        <div *ngIf="f.dtaVencimento.errors['required']">Selecione a data de Vencimento
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-2 col-12 padding-5"
                                ngbTooltip="Campo calculado automaticamente, data do vencimento - data emissão">
                                <div class="form-group">
                                    <label for="id" >Dias Venc - Emissão</label>
                                    <span class="form-control span-disable">{{daysFromVencEmissao()}}</span>
                                </div>
                            </div>

                            <div class="col-sm-2 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idDtaLiquidacao">Data Liquidação</label>
                                    <input type="date" [ngClass]="{'is-invalid': submitted && f.dtaLiquidacao.errors}"
                                        class="form-control" id="idDtaLiquidacao" formControlName="dtaLiquidacao">
                                    <div *ngIf="submitted && f.dtaLiquidacao.errors" class="invalid-feedback">
                                        <div *ngIf="f.dtaLiquidacao.errors['required']">Selecione a data da liquidação
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-2 col-12 padding-5"
                                ngbTooltip="Campo calculado automaticamente, data da liquidação - data emissão">
                                <div class="form-group">
                                    <label for="id" >Dias Liqui - Emissão</label>
                                    <span class="form-control span-disable">{{daysFromLiquiEmissao()}}</span>
                                </div>
                            </div>

                        </div>

                        <hr>

                        <div class="row">

                            <div class="col-sm-5 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idVlrTotal">Valor Total Titulo</label>
                                    <div class="input-group">
                                        <span class="form-control span-disable" name="nmVlrTotal"
                                            ngbTooltip="Campo calculado automaticamente, valor total do titulo"
                                            id="idVlrTotal">{{ getVlrTotal() | number:'1.2-2':'pt-BR' }}</span>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-5 col-12 padding-5">
                                <div class="form-group">
                                    <label for="idVlrLiquidado">Valor Liquidado</label>
                                    <input type="number" [ngClass]="{'is-invalid': submitted && f.vlrLiquidado.errors}"
                                        class="form-control" id="idVlrLiquidado" formControlName="vlrLiquidado">
                                    <div *ngIf="submitted && f.vlrLiquidado.errors" class="invalid-feedback">
                                        <div *ngIf="f.vlrLiquidado.errors['required']">Digite o valor liquidado
                                        </div>
                                        <div *ngIf="f.vlrLiquidado.errors['min']">Valor deve ser maior ou igual a 0
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-2 col-12 padding-5"
                                ngbTooltip="Campo calculado automaticamente, apenas para ajudar nos valores lançados, representa valor liquidado - valor total do titulo">
                                <div class="form-group">
                                    <label for="id" >Dif</label>
                                    <span class="form-control span-disable">{{vlrLiquidadoValor() |
                                        number:'1.2-2':'pt-BR'}}</span>
                                </div>
                            </div>

                            <div class="col-12 padding-5">
                                <div class="form-group">
                                    <label for="nameInputDescricao">Descrição</label>
                                    <textarea class="form-control" formControlName="descricao"
                                        id="nameInputDescricao"></textarea>
                                </div>
                            </div>

                        </div>

                    </form>
                </div>
            </div>

        </div>
        <div *ngIf="statusForm === 3">


            <div class="card bg-light mb-3">
                <div class="card-header">Ações</div>
                <div class="card-body card-buttons">
                    <div class="row">
                        <div class="col-sm-3 col-6 div-mobile-buttons d-grid">
                            <button type="button" class="btn btn-block btn-primary butao-acao" (click)="voltar()">
                                <span class="fa fa-arrow-left"></span> Voltar
                            </button>
                        </div>

                        <div class="col-sm-3 col-6 div-mobile-buttons d-grid">
                            <button type="button" class="btn btn-block btn-warning butao-acao"
                                [disabled]="selected.length === 0" (click)="editando()">
                                <span class="fa fa-edit"></span> Editar
                            </button>
                        </div>

                        <div class="col-sm-3 col-6 div-mobile-buttons d-grid">
                            <button type="button" class="btn btn-block btn-warning butao-acao" (click)="geraCSV()">
                                <span class="fa"
                                    [ngClass]="botaoGeraCSV !== 'Gerar CSV' ? 'fa-refresh fa-spin fa-fw' : ''"></span>
                                {{botaoGeraCSV}}
                            </button>
                        </div>

                        <!--
                        <div class="col-lg-3 col-xl-3">
                            <button type="button" class="btn btn-block btn-warning butao-acao" (click)="geraCSV()">
                                <span class="fa"
                                    [ngClass]="botaoGeraCSV != 'Gerar CSV' ? 'fa-refresh fa-spin fa-fw' : ''"></span>
                                {{botaoGeraCSV}}
                            </button>
                        </div>
                    -->


                    </div>
                </div>
            </div>


            <ngx-datatable class="material" [scrollbarH]="true" [rows]="pageTituloReceber.content" appResizeWatcher
                [columnMode]="ColumnMode.standard" [headerHeight]="35" [footerHeight]="70" rowHeight="auto"
                [rowClass]="getRowClass" [selected]="selected" [selectionType]="selectionTypeSingle"
                (activate)="onActivate($event)" [externalPaging]="true" [count]="pageTituloReceber.totalElements"
                [offset]="pageTituloReceber.pageable.pageNumber" [limit]="pageTituloReceber.size"
                (page)='setPage($event)'>
                <ngx-datatable-column name="ID" prop="id" [width]="80"></ngx-datatable-column>
                <!--<ngx-datatable-column name="COD" prop="codPreVenda" [width]="110"></ngx-datatable-column>-->
                <ngx-datatable-column name="DATA INCLUSÃO" prop="dtaInclusao" [width]="170">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | amDateFormat:'DD/MM/YYYY HH:mm:ss'}}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="USUÁRIO INCLUSÃO" prop="usuarioInclusao"
                    [width]="140"></ngx-datatable-column>
                <ngx-datatable-column name="TIPO" prop="tituloTipoDTO.nome" [width]="140"></ngx-datatable-column>
                <ngx-datatable-column name="STATUS" prop="indStatus" [width]="120">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{ getStatusTitulo(value) }}
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column name="CLIENTE" prop="clienteDTO.nome" [width]="500"></ngx-datatable-column>

                <ngx-datatable-column name="VENDA ID" prop="vendaDTO_id" [width]="70"></ngx-datatable-column>

                <ngx-datatable-column name="NOSSO NUMERO" [width]="200">
                    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                        <input type="text" class="form-control input-nosso-num" (keydown.enter)="findClienteById()"
                            [(ngModel)]="row.numTituloCNAB">
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column name="NN" [width]="40">
                    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                        <button (click)="atualizaNossoNumero(row)"><span class="fa fa-edit"></span></button>
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column name="DATA EMISSÃO" prop="dtaEmissao" [width]="120">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | amDateFormat:'DD/MM/YYYY'}}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="DATA VENCIMENTO" prop="dtaVencimento" [width]="120">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | amDateFormat:'DD/MM/YYYY'}}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="DATA LIQUIDAÇÃO" prop="dtaLiquidacao" [width]="120">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | amDateFormat:'DD/MM/YYYY'}}
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column name="DIAS ATRASO" [width]="90">
                    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                        {{ getDiasAtraso(row) }}
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column name="VALOR ORIGINAL" prop="vlrOriginal" [width]="130">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | number:'1.2-2':'pt-BR' }}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="VALOR JUROS" prop="vlrJuros" [width]="130">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | number:'1.2-2':'pt-BR' }}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="VALOR MULTA" prop="vlrMulta" [width]="130">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | number:'1.2-2':'pt-BR' }}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="VALOR TAXA COBRANÇA" prop="vlrTaxaCobranca" [width]="160">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | number:'1.2-2':'pt-BR' }}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="VALOR DESPESA ACESSORIA" prop="vlrDespesaAcessoria" [width]="180">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | number:'1.2-2':'pt-BR' }}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="VALOR TOTAL" prop="vlrTotal" [width]="130">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | number:'1.2-2':'pt-BR' }}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="VALOR LIQUIDADO" prop="vlrLiquidado" [width]="130">
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{value | number:'1.2-2':'pt-BR' }}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="BANCO" prop="bancoFebrabanDTO.desBanco"
                    [width]="500"></ngx-datatable-column>


            </ngx-datatable>
        </div>
    </div>
</div>